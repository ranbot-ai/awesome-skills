{
  "id": "antigravity-azure-servicebus-py",
  "name": "azure-servicebus-py",
  "slug": "azure-servicebus-py",
  "description": "Azure Service Bus SDK for Python messaging. Use for queues, topics, subscriptions, and enterprise messaging patterns.\nTriggers: \"service bus\", \"ServiceBusClient\", \"queue\", \"topic\", \"subscription\", \"message broker\".\n",
  "category": "AI & Agents",
  "source": "antigravity",
  "repoUrl": "https://github.com/sickn33/antigravity-awesome-skills",
  "skillUrl": "https://github.com/sickn33/antigravity-awesome-skills/tree/main/skills/azure-servicebus-py",
  "content": "\n# Azure Service Bus SDK for Python\n\nEnterprise messaging for reliable cloud communication with queues and pub/sub topics.\n\n## Installation\n\n```bash\npip install azure-servicebus azure-identity\n```\n\n## Environment Variables\n\n```bash\nSERVICEBUS_FULLY_QUALIFIED_NAMESPACE=<namespace>.servicebus.windows.net\nSERVICEBUS_QUEUE_NAME=myqueue\nSERVICEBUS_TOPIC_NAME=mytopic\nSERVICEBUS_SUBSCRIPTION_NAME=mysubscription\n```\n\n## Authentication\n\n```python\nfrom azure.identity import DefaultAzureCredential\nfrom azure.servicebus import ServiceBusClient\n\ncredential = DefaultAzureCredential()\nnamespace = \"<namespace>.servicebus.windows.net\"\n\nclient = ServiceBusClient(\n    fully_qualified_namespace=namespace,\n    credential=credential\n)\n```\n\n## Client Types\n\n| Client | Purpose | Get From |\n|--------|---------|----------|\n| `ServiceBusClient` | Connection management | Direct instantiation |\n| `ServiceBusSender` | Send messages | `client.get_queue_sender()` / `get_topic_sender()` |\n| `ServiceBusReceiver` | Receive messages | `client.get_queue_receiver()` / `get_subscription_receiver()` |\n\n## Send Messages (Async)\n\n```python\nimport asyncio\nfrom azure.servicebus.aio import ServiceBusClient\nfrom azure.servicebus import ServiceBusMessage\nfrom azure.identity.aio import DefaultAzureCredential\n\nasync def send_messages():\n    credential = DefaultAzureCredential()\n    \n    async with ServiceBusClient(\n        fully_qualified_namespace=\"<namespace>.servicebus.windows.net\",\n        credential=credential\n    ) as client:\n        sender = client.get_queue_sender(queue_name=\"myqueue\")\n        \n        async with sender:\n            # Single message\n            message = ServiceBusMessage(\"Hello, Service Bus!\")\n            await sender.send_messages(message)\n            \n            # Batch of messages\n            messages = [ServiceBusMessage(f\"Message {i}\") for i in range(10)]\n            await sender.send_messages(messages)\n            \n            # Message batch (for size control)\n            batch = await sender.create_message_batch()\n            for i in range(100):\n                try:\n                    batch.add_message(ServiceBusMessage(f\"Batch message {i}\"))\n                except ValueError:  # Batch full\n                    await sender.send_messages(batch)\n                    batch = await sender.create_message_batch()\n                    batch.add_message(ServiceBusMessage(f\"Batch message {i}\"))\n            await sender.send_messages(batch)\n\nasyncio.run(send_messages())\n```\n\n## Receive Messages (Async)\n\n```python\nasync def receive_messages():\n    credential = DefaultAzureCredential()\n    \n    async with ServiceBusClient(\n        fully_qualified_namespace=\"<namespace>.servicebus.windows.net\",\n        credential=credential\n    ) as client:\n        receiver = client.get_queue_receiver(queue_name=\"myqueue\")\n        \n        async with receiver:\n            # Receive batch\n            messages = await receiver.receive_messages(\n                max_message_count=10,\n                max_wait_time=5  # seconds\n            )\n            \n            for msg in messages:\n                print(f\"Received: {str(msg)}\")\n                await receiver.complete_message(msg)  # Remove from queue\n\nasyncio.run(receive_messages())\n```\n\n## Receive Modes\n\n| Mode | Behavior | Use Case |\n|------|----------|----------|\n| `PEEK_LOCK` (default) | Message locked, must complete/abandon | Reliable processing |\n| `RECEIVE_AND_DELETE` | Removed immediately on receive | At-most-once delivery |\n\n```python\nfrom azure.servicebus import ServiceBusReceiveMode\n\nreceiver = client.get_queue_receiver(\n    queue_name=\"myqueue\",\n    receive_mode=ServiceBusReceiveMode.RECEIVE_AND_DELETE\n)\n```\n\n## Message Settlement\n\n```python\nasync with receiver:\n    messages = await receiver.receive_messages(max_message_count=1)\n    \n    for msg in messages:\n        try:\n            # Process message...\n            await receiver.complete_message(msg)  # Success - remove from queue\n        except ProcessingError:\n            await receiver.abandon_message(msg)  # Retry later\n        except PermanentError:\n            await receiver.dead_letter_message(\n                msg,\n                reason=\"ProcessingFailed\",\n                error_description=\"Could not process\"\n            )\n```\n\n| Action | Effect |\n|--------|--------|\n| `complete_message()` | Remove from queue (success) |\n| `abandon_message()` | Release lock, retry immediately |\n| `dead_letter_message()` | Move to dead-letter queue |\n| `defer_message()` | Set aside, receive by sequence number |\n\n## Topics and Subscriptions\n\n```python\n# Send to topic\nsender = client.get_topic_sender(topic_name=\"mytopic\")\nasync with sender:\n    await sender.send_messages(ServiceBusMessage(\"Topic message\"))\n\n# Receive from subscription\nreceiver = client.get_subscription_receiver(\n    topic_name=\"mytopic\",\n    subscription_name=\"mysubscription\"\n)\nasync with receiver:\n    messages = await receiver.receive_messages(max_message_count=10)\n```\n\n## Sessions ",
  "tags": [
    "python",
    "ai",
    "azure"
  ],
  "useCases": [],
  "scrapedAt": "2026-02-12T07:15:59.578Z"
}