{
  "id": "antigravity-iterate-pr",
  "name": "iterate-pr",
  "slug": "iterate-pr",
  "description": "Iterate on a PR until CI passes. Use when you need to fix CI failures, address review feedback, or continuously push fixes until all checks are green. Automates the feedback-fix-push-wait cycle.",
  "category": "AI & Agents",
  "source": "antigravity",
  "repoUrl": "https://github.com/sickn33/antigravity-awesome-skills",
  "skillUrl": "https://github.com/sickn33/antigravity-awesome-skills/tree/main/skills/iterate-pr",
  "content": "\n# Iterate on PR Until CI Passes\n\nContinuously iterate on the current branch until all CI checks pass and review feedback is addressed.\n\n## When to Use This Skill\n\nUse this skill when:\n- Fixing CI failures\n- Addressing review feedback\n- Continuously pushing fixes until all checks are green\n- Automating the feedback-fix-push-wait cycle\n- Ensuring PR meets all quality gates\n\n**Requires**: GitHub CLI (`gh`) authenticated and available.\n\n## Process\n\n### Step 1: Identify the PR\n\n```bash\ngh pr view --json number,url,headRefName,baseRefName\n```\n\nIf no PR exists for the current branch, stop and inform the user.\n\n### Step 2: Check CI Status First\n\nAlways check CI/GitHub Actions status before looking at review feedback:\n\n```bash\ngh pr checks --json name,state,bucket,link,workflow\n```\n\nThe `bucket` field categorizes state into: `pass`, `fail`, `pending`, `skipping`, or `cancel`.\n\n**Important:** If any of these checks are still `pending`, wait before proceeding:\n- `sentry` / `sentry-io`\n- `codecov`\n- `cursor` / `bugbot` / `seer`\n- Any linter or code analysis checks\n\nThese bots may post additional feedback comments once their checks complete. Waiting avoids duplicate work.\n\n### Step 3: Gather Review Feedback\n\nOnce CI checks have completed (or at least the bot-related checks), gather human and bot feedback:\n\n**Review Comments and Status:**\n```bash\ngh pr view --json reviews,comments,reviewDecision\n```\n\n**Inline Code Review Comments:**\n```bash\ngh api repos/{owner}/{repo}/pulls/{pr_number}/comments\n```\n\n**PR Conversation Comments (includes bot comments):**\n```bash\ngh api repos/{owner}/{repo}/issues/{pr_number}/comments\n```\n\nLook for bot comments from: Sentry, Codecov, Cursor, Bugbot, Seer, and other automated tools.\n\n### Step 4: Investigate Failures\n\nFor each CI failure, get the actual logs:\n\n```bash\n# List recent runs for this branch\ngh run list --branch $(git branch --show-current) --limit 5 --json databaseId,name,status,conclusion\n\n# View failed logs for a specific run\ngh run view <run-id> --log-failed\n```\n\nDo NOT assume what failed based on the check name alone. Always read the actual logs.\n\n### Step 5: Validate Feedback\n\nFor each piece of feedback (CI failure or review comment):\n\n1. **Read the relevant code** - Understand the context before making changes\n2. **Verify the issue is real** - Not all feedback is correct; reviewers and bots can be wrong\n3. **Check if already addressed** - The issue may have been fixed in a subsequent commit\n4. **Skip invalid feedback** - If the concern is not legitimate, move on\n\n### Step 6: Address Valid Issues\n\nMake minimal, targeted code changes. Only fix what is actually broken.\n\n### Step 7: Commit and Push\n\n```bash\ngit add -A\ngit commit -m \"fix: <descriptive message of what was fixed>\"\ngit push origin $(git branch --show-current)\n```\n\n### Step 8: Wait for CI\n\nUse the built-in watch functionality:\n\n```bash\ngh pr checks --watch --interval 30\n```\n\nThis waits until all checks complete. Exit code 0 means all passed, exit code 1 means failures.\n\nAlternatively, poll manually if you need more control:\n\n```bash\ngh pr checks --json name,state,bucket | jq '.[] | select(.bucket != \"pass\")'\n```\n\n### Step 9: Repeat\n\nReturn to Step 2 if:\n- Any CI checks failed\n- New review feedback appeared\n\nContinue until all checks pass and no unaddressed feedback remains.\n\n## Exit Conditions\n\n**Success:**\n- All CI checks are green (`bucket: pass`)\n- No unaddressed human review feedback\n\n**Ask for Help:**\n- Same failure persists after 3 attempts (likely a flaky test or deeper issue)\n- Review feedback requires clarification or decision from the user\n- CI failure is unrelated to branch changes (infrastructure issue)\n\n**Stop Immediately:**\n- No PR exists for the current branch\n- Branch is out of sync and needs rebase (inform user)\n\n## Tips\n\n- Use `gh pr checks --required` to focus only on required checks\n- Use `gh run view <run-id> --verbose` to see all job steps, not just failures\n- If a check is from an external service, the `link` field in checks JSON provides the URL to investigate\n",
  "tags": [
    "api",
    "ai",
    "workflow"
  ],
  "useCases": [
    "Fixing CI failures",
    "Addressing review feedback",
    "Continuously pushing fixes until all checks are green",
    "Automating the feedback-fix-push-wait cycle",
    "Ensuring PR meets all quality gates"
  ],
  "scrapedAt": "2026-01-31T06:52:43.331Z"
}