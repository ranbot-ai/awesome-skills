{
  "id": "antigravity-azure-resource-manager-sql-dotnet",
  "name": "azure-resource-manager-sql-dotnet",
  "slug": "azure-resource-manager-sql-dotnet",
  "description": "Azure Resource Manager SDK for Azure SQL in .NET. Use for MANAGEMENT PLANE operations: creating/managing SQL servers, databases, elastic pools, firewall rules, and failover groups via Azure Resource Manager. NOT for data plane operations (executing queries) - use Microsoft.Data.SqlClient for that. T",
  "category": "AI & Agents",
  "source": "antigravity",
  "repoUrl": "https://github.com/sickn33/antigravity-awesome-skills",
  "skillUrl": "https://github.com/sickn33/antigravity-awesome-skills/tree/main/skills/azure-resource-manager-sql-dotnet",
  "content": "\n# Azure.ResourceManager.Sql (.NET)\n\nManagement plane SDK for provisioning and managing Azure SQL resources via Azure Resource Manager.\n\n> **⚠️ Management vs Data Plane**\n> - **This SDK (Azure.ResourceManager.Sql)**: Create servers, databases, elastic pools, configure firewall rules, manage failover groups\n> - **Data Plane SDK (Microsoft.Data.SqlClient)**: Execute queries, stored procedures, manage connections\n\n## Installation\n\n```bash\ndotnet add package Azure.ResourceManager.Sql\ndotnet add package Azure.Identity\n```\n\n**Current Versions**: Stable v1.3.0, Preview v1.4.0-beta.3\n\n## Environment Variables\n\n```bash\nAZURE_SUBSCRIPTION_ID=<your-subscription-id>\n# For service principal auth (optional)\nAZURE_TENANT_ID=<tenant-id>\nAZURE_CLIENT_ID=<client-id>\nAZURE_CLIENT_SECRET=<client-secret>\n```\n\n## Authentication\n\n```csharp\nusing Azure.Identity;\nusing Azure.ResourceManager;\nusing Azure.ResourceManager.Sql;\n\n// Always use DefaultAzureCredential\nvar credential = new DefaultAzureCredential();\nvar armClient = new ArmClient(credential);\n\n// Get subscription\nvar subscriptionId = Environment.GetEnvironmentVariable(\"AZURE_SUBSCRIPTION_ID\");\nvar subscription = armClient.GetSubscriptionResource(\n    new ResourceIdentifier($\"/subscriptions/{subscriptionId}\"));\n```\n\n## Resource Hierarchy\n\n```\nArmClient\n└── SubscriptionResource\n    └── ResourceGroupResource\n        └── SqlServerResource\n            ├── SqlDatabaseResource\n            ├── ElasticPoolResource\n            │   └── ElasticPoolDatabaseResource\n            ├── SqlFirewallRuleResource\n            ├── FailoverGroupResource\n            ├── ServerBlobAuditingPolicyResource\n            ├── EncryptionProtectorResource\n            └── VirtualNetworkRuleResource\n```\n\n## Core Workflow\n\n### 1. Create SQL Server\n\n```csharp\nusing Azure.ResourceManager.Sql;\nusing Azure.ResourceManager.Sql.Models;\n\n// Get resource group\nvar resourceGroup = await subscription\n    .GetResourceGroupAsync(\"my-resource-group\");\n\n// Define server\nvar serverData = new SqlServerData(AzureLocation.EastUS)\n{\n    AdministratorLogin = \"sqladmin\",\n    AdministratorLoginPassword = \"YourSecurePassword123!\",\n    Version = \"12.0\",\n    MinimalTlsVersion = SqlMinimalTlsVersion.Tls1_2,\n    PublicNetworkAccess = ServerNetworkAccessFlag.Enabled\n};\n\n// Create server (long-running operation)\nvar serverCollection = resourceGroup.Value.GetSqlServers();\nvar operation = await serverCollection.CreateOrUpdateAsync(\n    WaitUntil.Completed,\n    \"my-sql-server\",\n    serverData);\n\nSqlServerResource server = operation.Value;\n```\n\n### 2. Create SQL Database\n\n```csharp\nvar databaseData = new SqlDatabaseData(AzureLocation.EastUS)\n{\n    Sku = new SqlSku(\"S0\") { Tier = \"Standard\" },\n    MaxSizeBytes = 2L * 1024 * 1024 * 1024, // 2 GB\n    Collation = \"SQL_Latin1_General_CP1_CI_AS\",\n    RequestedBackupStorageRedundancy = SqlBackupStorageRedundancy.Local\n};\n\nvar databaseCollection = server.GetSqlDatabases();\nvar dbOperation = await databaseCollection.CreateOrUpdateAsync(\n    WaitUntil.Completed,\n    \"my-database\",\n    databaseData);\n\nSqlDatabaseResource database = dbOperation.Value;\n```\n\n### 3. Create Elastic Pool\n\n```csharp\nvar poolData = new ElasticPoolData(AzureLocation.EastUS)\n{\n    Sku = new SqlSku(\"StandardPool\")\n    {\n        Tier = \"Standard\",\n        Capacity = 100 // 100 eDTUs\n    },\n    PerDatabaseSettings = new ElasticPoolPerDatabaseSettings\n    {\n        MinCapacity = 0,\n        MaxCapacity = 100\n    }\n};\n\nvar poolCollection = server.GetElasticPools();\nvar poolOperation = await poolCollection.CreateOrUpdateAsync(\n    WaitUntil.Completed,\n    \"my-elastic-pool\",\n    poolData);\n\nElasticPoolResource pool = poolOperation.Value;\n```\n\n### 4. Add Database to Elastic Pool\n\n```csharp\nvar databaseData = new SqlDatabaseData(AzureLocation.EastUS)\n{\n    ElasticPoolId = pool.Id\n};\n\nawait databaseCollection.CreateOrUpdateAsync(\n    WaitUntil.Completed,\n    \"pooled-database\",\n    databaseData);\n```\n\n### 5. Configure Firewall Rules\n\n```csharp\n// Allow Azure services\nvar azureServicesRule = new SqlFirewallRuleData\n{\n    StartIPAddress = \"0.0.0.0\",\n    EndIPAddress = \"0.0.0.0\"\n};\n\nvar firewallCollection = server.GetSqlFirewallRules();\nawait firewallCollection.CreateOrUpdateAsync(\n    WaitUntil.Completed,\n    \"AllowAzureServices\",\n    azureServicesRule);\n\n// Allow specific IP range\nvar clientRule = new SqlFirewallRuleData\n{\n    StartIPAddress = \"203.0.113.0\",\n    EndIPAddress = \"203.0.113.255\"\n};\n\nawait firewallCollection.CreateOrUpdateAsync(\n    WaitUntil.Completed,\n    \"AllowClientIPs\",\n    clientRule);\n```\n\n### 6. List Resources\n\n```csharp\n// List all servers in subscription\nawait foreach (var srv in subscription.GetSqlServersAsync())\n{\n    Console.WriteLine($\"Server: {srv.Data.Name} in {srv.Data.Location}\");\n}\n\n// List databases in a server\nawait foreach (var db in server.GetSqlDatabases())\n{\n    Console.WriteLine($\"Database: {db.Data.Name}, SKU: {db.Data.Sku?.Name}\");\n}\n\n// List elastic pools\nawait foreach (var ep in server.GetElasticPools()",
  "tags": [
    "api",
    "ai",
    "workflow",
    "security",
    "azure",
    "rag",
    "cro"
  ],
  "useCases": [],
  "scrapedAt": "2026-02-12T07:15:57.178Z"
}