{
  "id": "antigravity-python-patterns",
  "name": "python-patterns",
  "slug": "python-patterns",
  "description": "Python development principles and decision-making. Framework selection, async patterns, type hints, project structure. Teaches thinking, not copying.",
  "category": "AI & Agents",
  "source": "antigravity",
  "repoUrl": "https://github.com/sickn33/antigravity-awesome-skills",
  "skillUrl": "https://github.com/sickn33/antigravity-awesome-skills/tree/main/skills/python-patterns",
  "content": "\n# Python Patterns\n\n> Python development principles and decision-making for 2025.\n> **Learn to THINK, not memorize patterns.**\n\n---\n\n## ⚠️ How to Use This Skill\n\nThis skill teaches **decision-making principles**, not fixed code to copy.\n\n- ASK user for framework preference when unclear\n- Choose async vs sync based on CONTEXT\n- Don't default to same framework every time\n\n---\n\n## 1. Framework Selection (2025)\n\n### Decision Tree\n\n```\nWhat are you building?\n│\n├── API-first / Microservices\n│   └── FastAPI (async, modern, fast)\n│\n├── Full-stack web / CMS / Admin\n│   └── Django (batteries-included)\n│\n├── Simple / Script / Learning\n│   └── Flask (minimal, flexible)\n│\n├── AI/ML API serving\n│   └── FastAPI (Pydantic, async, uvicorn)\n│\n└── Background workers\n    └── Celery + any framework\n```\n\n### Comparison Principles\n\n| Factor | FastAPI | Django | Flask |\n|--------|---------|--------|-------|\n| **Best for** | APIs, microservices | Full-stack, CMS | Simple, learning |\n| **Async** | Native | Django 5.0+ | Via extensions |\n| **Admin** | Manual | Built-in | Via extensions |\n| **ORM** | Choose your own | Django ORM | Choose your own |\n| **Learning curve** | Low | Medium | Low |\n\n### Selection Questions to Ask:\n1. Is this API-only or full-stack?\n2. Need admin interface?\n3. Team familiar with async?\n4. Existing infrastructure?\n\n---\n\n## 2. Async vs Sync Decision\n\n### When to Use Async\n\n```\nasync def is better when:\n├── I/O-bound operations (database, HTTP, file)\n├── Many concurrent connections\n├── Real-time features\n├── Microservices communication\n└── FastAPI/Starlette/Django ASGI\n\ndef (sync) is better when:\n├── CPU-bound operations\n├── Simple scripts\n├── Legacy codebase\n├── Team unfamiliar with async\n└── Blocking libraries (no async version)\n```\n\n### The Golden Rule\n\n```\nI/O-bound → async (waiting for external)\nCPU-bound → sync + multiprocessing (computing)\n\nDon't:\n├── Mix sync and async carelessly\n├── Use sync libraries in async code\n└── Force async for CPU work\n```\n\n### Async Library Selection\n\n| Need | Async Library |\n|------|---------------|\n| HTTP client | httpx |\n| PostgreSQL | asyncpg |\n| Redis | aioredis / redis-py async |\n| File I/O | aiofiles |\n| Database ORM | SQLAlchemy 2.0 async, Tortoise |\n\n---\n\n## 3. Type Hints Strategy\n\n### When to Type\n\n```\nAlways type:\n├── Function parameters\n├── Return types\n├── Class attributes\n├── Public APIs\n\nCan skip:\n├── Local variables (let inference work)\n├── One-off scripts\n├── Tests (usually)\n```\n\n### Common Type Patterns\n\n```python\n# These are patterns, understand them:\n\n# Optional → might be None\nfrom typing import Optional\ndef find_user(id: int) -> Optional[User]: ...\n\n# Union → one of multiple types\ndef process(data: str | dict) -> None: ...\n\n# Generic collections\ndef get_items() -> list[Item]: ...\ndef get_mapping() -> dict[str, int]: ...\n\n# Callable\nfrom typing import Callable\ndef apply(fn: Callable[[int], str]) -> str: ...\n```\n\n### Pydantic for Validation\n\n```\nWhen to use Pydantic:\n├── API request/response models\n├── Configuration/settings\n├── Data validation\n├── Serialization\n\nBenefits:\n├── Runtime validation\n├── Auto-generated JSON schema\n├── Works with FastAPI natively\n└── Clear error messages\n```\n\n---\n\n## 4. Project Structure Principles\n\n### Structure Selection\n\n```\nSmall project / Script:\n├── main.py\n├── utils.py\n└── requirements.txt\n\nMedium API:\n├── app/\n│   ├── __init__.py\n│   ├── main.py\n│   ├── models/\n│   ├── routes/\n│   ├── services/\n│   └── schemas/\n├── tests/\n└── pyproject.toml\n\nLarge application:\n├── src/\n│   └── myapp/\n│       ├── core/\n│       ├── api/\n│       ├── services/\n│       ├── models/\n│       └── ...\n├── tests/\n└── pyproject.toml\n```\n\n### FastAPI Structure Principles\n\n```\nOrganize by feature or layer:\n\nBy layer:\n├── routes/ (API endpoints)\n├── services/ (business logic)\n├── models/ (database models)\n├── schemas/ (Pydantic models)\n└── dependencies/ (shared deps)\n\nBy feature:\n├── users/\n│   ├── routes.py\n│   ├── service.py\n│   └── schemas.py\n└── products/\n    └── ...\n```\n\n---\n\n## 5. Django Principles (2025)\n\n### Django Async (Django 5.0+)\n\n```\nDjango supports async:\n├── Async views\n├── Async middleware\n├── Async ORM (limited)\n└── ASGI deployment\n\nWhen to use async in Django:\n├── External API calls\n├── WebSocket (Channels)\n├── High-concurrency views\n└── Background task triggering\n```\n\n### Django Best Practices\n\n```\nModel design:\n├── Fat models, thin views\n├── Use managers for common queries\n├── Abstract base classes for shared fields\n\nViews:\n├── Class-based for complex CRUD\n├── Function-based for simple endpoints\n├── Use viewsets with DRF\n\nQueries:\n├── select_related() for FKs\n├── prefetch_related() for M2M\n├── Avoid N+1 queries\n└── Use .only() for specific fields\n```\n\n---\n\n## 6. FastAPI Principles\n\n### async def vs def in FastAPI\n\n```\nUse async def when:\n├── Using async database drivers\n├── Making async HTTP calls\n├── I/O-bound operations\n└── Want to handle concurrency\n\nUse def when:\n├── Blocking operations\n├── Sync database drivers\n├── CPU-bound wor",
  "tags": [
    "python",
    "api",
    "ai",
    "workflow",
    "design",
    "security",
    "cro"
  ],
  "useCases": [],
  "scrapedAt": "2026-01-26T13:21:02.782Z"
}